<%@ page contentType="text/html;charset=GBK" language="java" %>
<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta http-equiv="Content-Type" content="text/html;charset=GBK" />
		<meta content="yes" name="apple-mobile-web-app-capable" />
		<meta content="black" name="apple-mobile-web-app-status-bar-style" />
		<meta content="telephone=no" name="format-detection" />
		<meta http-equiv="Cache-Control" content="no-cache"/>
		<title>全部评价-商品</title>
		<link rel="stylesheet" href="css/common_css/initialization_style.css" />
		<link rel="stylesheet" href="css/common_css/public_style.css" />
		<link rel="stylesheet" href="css/all_evaluation.css" />
		<script type="text/javascript" src="js/common_js/jquery-2.1.4.min.js"></script>
		<script type="text/javascript" src="js/common_js/set_fontsize.js"></script>
	</head>

	<body>
		<div>
			<div class="title_content">全部评价</div>
			<img class="title_back" src="img/back_btn@2x.png" srcset="img/back_btn@2x.png 2x,img/back_btn@3x.png 3x" />
		</div>
		<div class="margin_top_six">
			<div class="background_color_FF">
				<div class="evaluation_container">
					<div class="evaluation_container_reviewer">
						<img class="evaluation_container_reviewer_pic" src="img/adviser_two@2x.png" srcset="img/adviser_two@2x.png 2x,img/adviser_two@3x.png 3x" />
						<span class="evaluation_container_reviewer_name">JOJO-溪溪</span>
					</div>
					<div class="evaluation_content_box">
						<div class="evaluation_content">
							大家买手机比较来比较去其实吧都差不多，反正我感 觉用的习惯不就好了么！
							<img class="emoji_style" src="img/表情/表情包/emoji_0.png">
							<img class="emoji_style" src="img/表情/表情包/emoji_10.png"> 就好了么就好了么就好了么
						</div>
						<div class="comment_goods_pic_container_out">
							<div class="comment_goods_pic_container_in">
								<img class="comment_goods_pic" src="" />
								<img class="comment_goods_pic" src="" />
								<img class="comment_goods_pic" src="" />
							</div>
						</div>
						<div class="evaluation_other_content_box">
							<div class="evaluation_time">06-15 08:52</div>
							<div class="evaluation_coloud_money_box">
								<img class="coloud_money_img" src="img/cloud_money@2x.png" srcset="img/cloud_money@2x.png 2x,img/cloud_money@3x.png 3x" />
								<span class="text_vertical_align">5</span>
							</div>
							<div class="comments_num_box">
								<img class="comment_and_zan_img" src="img/zan_btn@2x.png" srcset="img/zan_btn@2x.png 2x,img/zan_btn@3x.png 3x" />
								<span class="text_vertical_align">5</span>
							</div>
							<div class="zan_num_box">
								<img class="comment_and_zan_img" src="img/comment_icon@2x.png" srcset="img/comment_icon@2x.png 2x,img/comment_icon@3x.png 3x" />
								<span class="text_vertical_align">5</span>
							</div>
						</div>
					</div>
				</div>
				<div class="evaluation_container">
					<div class="evaluation_container_reviewer">
						<img class="evaluation_container_reviewer_pic" src="img/adviser_two@2x.png" srcset="img/adviser_two@2x.png 2x,img/adviser_two@3x.png 3x" />
						<span class="evaluation_container_reviewer_name">JOJO-溪溪</span>
					</div>
					<div class="evaluation_content_box">
						<div class="evaluation_content">
							大家买手机比较来比较去其实吧都差不多，反正我感 觉用的习惯不就好了么！就好了么就好了么就好了么
						</div>
						<div class="evaluation_other_content_box">
							<div class="evaluation_time">06-15 08:52</div>
							<div class="evaluation_coloud_money_box">
								<img class="coloud_money_img" src="img/cloud_money@2x.png" srcset="img/cloud_money@2x.png 2x,img/cloud_money@3x.png 3x" />
								<span class="text_vertical_align">5</span>
							</div>
							<div class="comments_num_box">
								<img class="comment_and_zan_img" src="img/zan_btn@2x.png" srcset="img/zan_btn@2x.png 2x,img/zan_btn@3x.png 3x" />
								<span class="text_vertical_align">5</span>
							</div>
							<div class="zan_num_box">
								<img class="comment_and_zan_img" src="img/comment_icon@2x.png" srcset="img/comment_icon@2x.png 2x,img/comment_icon@3x.png 3x" />
								<span class="text_vertical_align">5</span>
							</div>
						</div>
						<div class="reply_content_box">
							<div class="reply-item">
								<div class="evaluation_content">
									<span class="font_color_black">羊肉烤串：</span>大家买手机比较来比较去其实吧都差不多，反正我感 觉用的习惯不就好了么！就好了么就好了么就好了么
								</div>
								<div class="evaluation_other_content_box">
									<div class="evaluation_time">06-15 08:52</div>
									<div class="evaluation_coloud_money_box">
										<img class="coloud_money_img" src="img/cloud_money@2x.png" srcset="img/cloud_money@2x.png 2x,img/cloud_money@3x.png 3x" />
										<span class="text_vertical_align">5</span>
									</div>
									<div class="comments_num_box">
										<img class="comment_and_zan_img" src="img/zan_btn@2x.png" srcset="img/zan_btn@2x.png 2x,img/zan_btn@3x.png 3x" />
										<span class="text_vertical_align">5</span>
									</div>
									<!--<div class="zan_num_box">
										<img class="comment_and_zan_img" src="img/comment_icon@2x.png" srcset="img/comment_icon@2x.png 2x,img/comment_icon@3x.png 3x" />
										<span class="text_vertical_align">5</span>
									</div>-->
								</div>
							</div>
							<div class="rest_reply">查看剩下<span>3</span>条回复</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--评论弹窗-->
		<div style="position: fixed;width: 100%;height: 100%;left: 0;top: 0;background-color: rgba(0, 0, 0, 0.5)!important;z-index: 99;display: none;">
			<div style="position: absolute;top: 20%;left: 0;background-color: #FFFFFF;width: 90%;height: 20%;padding: 0 5%;">

			</div>
		</div>
		
	</body>
	<script type="text/javascript" src="js/common_js/change_fontsize.js"></script>
	<script type="text/javascript" src="js/common_js/my_tools.js"></script>
	<script>
		(function($, document) {
			//设置评论图片的滚动区域长度
			$(".comment_goods_pic_container_in").css("width","9rem");
			
		})(jQuery, document);
	</script>
	
	<script>
		(function($,document){
			//接口路径（商品详情页--他们都在说）
			//http://120.76.190.223:8988/mrsyg/kqgoods/GoodsComment.form?product=4&pag_no=1&pag_num=3
			var urlPath_two = "mrsyg/kqgoods/GoodsComment.form";
			var need_data_two = {
				"product_id": "4",
				"pag_no": "1",
				"pag_num": "3"
			};
			var data_two = myAjax(urlPath_two, need_data_two);
			if(data_two != undefined) {
				initTwo(data_two);
			}

			function initTwo(datas){
				var reply_remain = 0;
				$(".background_color_FF").empty();
				//评论总数
				var comment_sum = datas.comment_sum;
				$.each(datas.commentinfo, function(index,commentdatas) {
					//评论者照片
					var customer_picture = commentdatas.customer_picture;
					//评论者id
					var customer_id = commentdatas.customer_id;
					//评论者名称
					var customer_name = commentdatas.customer_name;
					//评论时间
					var created_at = commentdatas.created_at;
					//评论id
					var comment_id = commentdatas.comment_id;
					//评论内容
					var comment_content = commentdatas.comment_content;
					//是否打赏
					var is_reward = commentdatas.is_reward;
					//打赏金额
					var reward_amount = commentdatas.reward_amount;
					//照片1
					var picture_one = commentdatas.picture_one;
					//照片2
					var picture_two = commentdatas.picture_two;
					//照片3
					var picture_three = commentdatas.picture_three;
					//回复总数
					var reply_total = commentdatas.reply_total;
					//评论点赞总数
					var comment_like_total = commentdatas.comment_like_total;
					//评论是否点赞
					var comment_like_flag = commentdatas.comment_like_flag;
					//评论dom
					var reply ='';
					if(0!=reply_total){
						//剩余评论
						reply_remain = reply_total-1;
						//回复DOM
						reply= '<div class="reply_content_box">';
						$.each(commentdatas.reply_info, function(index,replydatas) {
							//回复id
							var reply_id = replydatas.reply_id;
							//评论内容
							var reply_content = replydatas.reply_content;
							//回复点赞总数
							var reply_like_total = replydatas.reply_like_total;
							//评论是否点赞
							var reply_like_flag = replydatas.reply_like_flag;
							//创建时间
							var created_at = replydatas.created_at;
							//回复人姓名
							var customer_name = replydatas.customer_name;
							
							var hideString = '<div class="reply-item" style="display:none;">';
							var displayString = '<div class="reply-item">';
							var replyString = '<div class="evaluation_content">'+
														'<span class="font_color_black">'+customer_name+'：</span>'+ reply_content +
													'</div>' +
													'<div class="evaluation_other_content_box">' +
														'<div class="evaluation_time">' + created_at +'</div>'+
														'<div class="evaluation_coloud_money_box">' +
															'<img class="coloud_money_img" src="img/cloud_money@2x.png" srcset="img/cloud_money@2x.png 2x,img/cloud_money@3x.png 3x" />' +
															'<span class="text_vertical_align">5</span>' +
														'</div>' +
														'<div class="comments_num_box">' +
															'<img class="comment_and_zan_img" src="img/zan_btn@2x.png" srcset="img/zan_btn@2x.png 2x,img/zan_btn@3x.png 3x" />' +
															'<span class="text_vertical_align">'+ reply_like_total +'</span>' +
														'</div>' +
													'</div>'+
												'</div>';
							if(0==index&&reply_remain>0){
								replyString+='<div class="rest_reply">查看剩下<span>'+reply_remain+'</span>条回复</div>' ;
								reply+=displayString+replyString;
							}else{
								reply+=hideString+replyString;
							}
							
						});
					}
					
					var commentString = '<div class="evaluation_container">' +
											'<div class="evaluation_container_reviewer">' +
												'<img class="evaluation_container_reviewer_pic" src="'+ customer_picture + '"/>' +
												'<span class="evaluation_container_reviewer_name">'+customer_name+'</span>'+
											'</div>'+
											'<div class="evaluation_content_box">'+
												'<div class="evaluation_content">' + comment_content +'</div>' +
												'<div class="evaluation_other_content_box">' +
													'<div class="evaluation_time">'+created_at+'</div>'+
													'<div class="evaluation_coloud_money_box">'+
														'<img class="coloud_money_img" src="img/cloud_money@2x.png" srcset="img/cloud_money@2x.png 2x,img/cloud_money@3x.png 3x" />'+
														'<span class="text_vertical_align">5</span>'+
													'</div>'+
													'<div class="comments_num_box">'+
														'<img class="comment_and_zan_img" src="img/zan_btn@2x.png" srcset="img/zan_btn@2x.png 2x,img/zan_btn@3x.png 3x" />'+
														'<span class="text_vertical_align">'+comment_like_total+'</span>'+
													'</div>'+
													'<div class="zan_num_box">'+
														'<img class="comment_and_zan_img" src="img/comment_icon@2x.png" srcset="img/comment_icon@2x.png 2x,img/comment_icon@3x.png 3x" />'+
														'<span class="text_vertical_align">'+reply_total+'</span>'+
													'</div>' +
												'</div>';
					commentString+=reply+'</div></div>';
					$(commentString).appendTo(".background_color_FF");
				});
			}
			
			$(".rest_reply").click(function(e){
				$(e.target).css("display","none");
				$(e.target).nextAll(".reply-item").css("display","block");
			})
		})(jQuery,document);
	</script>

</html>